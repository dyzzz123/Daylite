# Daylite 产品需求文档（PRD）

## 文档信息

| 项目 | 内容 |
|-----|------|
| 产品名称 | Daylite - 个人信息聚合仪表盘 |
| 产品版本 | v1.0.0 |
| 文档版本 | v1.0.0 |
| 创建日期 | 2026-02-06 |
| 产品类型 | 个人效率工具 / 信息聚合平台 |
| 技术栈 | Next.js 16 + React 19 + SQLite + AI |

---

## 1. 产品概述

### 1.1 产品愿景

打造一个**"魔法报纸"式的个人信息聚合仪表盘**，每天早上为用户提供个性化的信息日报。通过 AI 驱动的智能汇总，将分散在各个平台的信息源聚合到统一的时间线中，让用户用最少的时间获取最有价值的信息。

### 1.2 产品定位

**定位**：个人信息的**一站式阅读平台** + AI 智能助手

**核心价值**：
- 🎯 **信息聚合**：统一管理多个信息源（RSS、知乎、微博、小红书等）
- 🤖 **AI 智能汇总**：自动生成每日关键要点，节省阅读时间
- ⚡ **极简设计**：清爽的界面，专注阅读体验
- 🔒 **隐私优先**：本地数据库，数据完全可控

### 1.3 目标用户

**主要用户群体**：

| 用户类型 | 特征 | 痛点 | 需求 |
|---------|------|------|------|
| **互联网从业者** | 需要跟踪行业动态 | 信息分散在多个平台，切换成本高 | 统一聚合，快速浏览 |
| **内容创作者** | 需要寻找创作灵感 | 热点发现慢，信息筛选困难 | 热榜追踪，智能推荐 |
| **终身学习者** | 渴望持续学习 | 信息过载，难以筛选 | AI 汇总，聚焦重点 |
| **效率爱好者** | 追求工具效率 | 不喜欢繁琐的操作 | 一键刷新，极简界面 |

---

## 2. 产品功能

### 2.1 功能架构图

```
Daylite 个人信息聚合仪表盘
│
├── 📊 核心功能
│   ├── 信息源管理
│   │   ├── RSS 订阅源
│   │   ├── 知乎热榜
│   │   ├── 微博热搜
│   │   ├── 小红书内容
│   │   └── 自定义源（待开发）
│   │
│   ├── 信息流展示
│   │   ├── 统一时间线
│   │   ├── 源过滤
│   │   ├── 标签系统
│   │   └── 全文搜索
│   │
│   └── AI 智能汇总
│       ├── 每日摘要（150字）
│       ├── 关键要点（3-5条）
│       └── 历史报告
│
├── ⚙️ 管理功能
│   ├── 源管理（启用/禁用/删除）
│   ├── 设置面板
│   │   ├── API Key 配置
│   │   ├── PIN 码保护
│   │   └── AI 提供商选择
│   └── 数据管理
│       ├── 手动刷新
│       ├── 清理旧数据
│       └── 数据导出（待开发）
│
└── 🎨 用户体验
    ├── 响应式设计
    ├── 加载状态
    ├── 错误处理
    └── 暗黑模式（待开发）
```

### 2.2 核心功能详细说明

#### 功能 1：信息源管理

**功能描述**：用户可以管理多个信息源，包括启用、禁用和删除操作。

**交互流程**：
1. 点击右上角设置按钮打开侧边栏
2. 查看"已启用"和"已禁用"的信息源列表
3. 切换开关启用/禁用源
4. 点击删除按钮移除源（需确认）

**功能特性**：
- ✅ 支持多种源类型（RSS、知乎、微博、小红书）
- ✅ 源图标显示（emoji）
- ✅ 源类型标签
- ✅ 启用状态实时切换
- ✅ 删除确认机制
- ⏳ 添加自定义源（v1.1）

**技术实现**：
- 数据库：`feed_sources` 表
- API：`/api/sources`
- 前端组件：`SettingsSidebar`

---

#### 功能 2：信息流展示

**功能描述**：将所有信息源的内容聚合到统一的时间线中，按发布时间倒序排列。

**交互流程**：
1. 页面加载时自动获取最新信息
2. 显示信息标题、摘要、来源、发布时间
3. 点击展开/收起详情
4. 点击"查看原文"跳转到源网站
5. 使用顶部筛选器过滤特定源
6. 点击刷新按钮手动更新

**功能特性**：
- ✅ 时间线布局
- ✅ 相对时间显示（"5分钟前"）
- ✅ 源图标和名称显示
- ✅ 标签显示
- ✅ 展开/收起详情
- ✅ 原文链接跳转
- ✅ 源过滤
- ✅ 分页加载（每页 20 条）
- ✅ 最后更新时间显示
- ⏳ 无限滚动（v1.2）

**技术实现**：
- 数据库：`feed_items` 表
- API：`/api/feeds`
- 前端组件：`FeedCard`

---

#### 功能 3：AI 智能汇总

**功能描述**：使用 AI 生成每日信息摘要，提取 3-5 个关键要点。

**交互流程**：
1. 页面顶部显示"今日 AI 汇报"卡片
2. 自动加载当日摘要（如已生成）
3. 点击"生成汇报"按钮手动触发
4. 显示加载动画和进度提示
5. 展示 150 字摘要 + 3-5 个要点
6. 点击"查看更多"查看完整摘要

**功能特性**：
- ✅ 每日摘要生成
- ✅ 关键要点提取（3-5条）
- ✅ 支持多个 AI 提供商（DeepSeek、OpenAI、Claude）
- ✅ 智能缓存（同一天不重复生成）
- ✅ 降级方案（API 不可用时使用模拟数据）
- ✅ 演示模式标识
- ⏳ 历史报告查看（v1.1）
- ⏳ 自定义 AI 提示词（v1.2）

**AI 提示词设计**：
```
你是一个专业的信息分析师。请基于以下信息，生成一份简洁的每日汇报：

1. 先用 150 字左右总结今日最重要的信息和趋势
2. 提取 3-5 个关键要点，每个要点用一句话概括
3. 按重要性排序，重点标注对读者有价值的信息
4. 使用简洁、专业的语言

信息来源：
- RSS 订阅：科技、效率工具、产品设计
- 知乎热榜：热门讨论和观点
- 微博热搜：社会热点和趋势
- 小红书：生活方式和消费趋势
```

**技术实现**：
- 数据库：`daily_reports` 表
- API：`/api/summary`
- 前端组件：`AISummary`

---

#### 功能 4：数据抓取系统

**功能描述**：定期从各个信息源抓取最新内容，存储到本地数据库。

**抓取调度**：
- ⏳ 定时自动抓取（Vercel Cron，每小时）
- ✅ 手动触发刷新
- ✅ 并发抓取多个源
- ✅ 失败重试机制（指数退避）

**抓取器实现**：

| 抓取器 | 状态 | 数据源 | 更新频率 |
|-------|------|-------|---------|
| RSS 抓取器 | ✅ 完成 | 标准 RSS/Atom 源 | 1小时 |
| 知乎热榜 | ✅ 完成 | 知乎热榜 API | 30分钟 |
| 微博热搜 | 🚧 开发中 | 微博热搜 API | 30分钟 |
| 小红书 | 🚧 开发中 | 小红书 Web | 1小时 |
| 论坛聚合 | 📅 计划中 | V2EX/Reddit | 2小时 |

**技术实现**：
- 调度器：`fetch-scheduler.ts`
- RSS 解析：`rss-parser` 库
- API 请求：`fetch` API
- 错误处理：指数退避重试

---

#### 功能 5：设置与安全

**功能描述**：管理应用配置和 API 密钥，使用 PIN 码保护敏感设置。

**设置项**：
1. **AI 配置**
   - AI 提供商选择（DeepSeek、OpenAI、Claude）
   - API Key 输入和验证
   - 模型选择

2. **安全设置**
   - PIN 码设置（4 位数字）
   - PIN 码验证（访问设置时）
   - API Key 隐藏显示（仅显示前 4 位）

3. **数据管理**
   - 手动刷新所有源
   - 清理 30 天前的旧数据
   - 查看数据库统计

**交互流程**：
1. 点击右上角设置按钮
2. 输入 PIN 码（如已设置）
3. 修改配置项
4. 保存更改
5. 关闭侧边栏

**技术实现**：
- 数据库：`settings` 表（JSON 格式）
- API：`/api/settings`
- 前端组件：`SettingsSidebar`

---

## 3. 非功能需求

### 3.1 性能要求

| 指标 | 目标 | 说明 |
|-----|------|------|
| 首屏加载时间 | < 2 秒 | 页面首次加载 |
| API 响应时间 | < 500ms | 信息流获取 |
| 抓取响应时间 | < 10 秒 | 单个源抓取 |
| AI 生成时间 | < 30 秒 | 每日摘要生成 |
| 数据库查询 | < 100ms | 常规查询 |

**优化措施**：
- ✅ Next.js 服务端渲染（SSR）
- ✅ 数据库索引优化
- ✅ 并发抓取
- ⏳ Redis 缓存（v1.2）
- ⏳ CDN 加速（v1.1）

---

### 3.2 可用性要求

| 指标 | 目标 | 说明 |
|-----|------|------|
| 系统可用性 | 99% | 月度可用率 |
| 抓取成功率 | > 95% | 抓取任务成功率 |
| 错误恢复时间 | < 5 分钟 | 故障恢复时间 |

**容错机制**：
- ✅ 抓取失败自动重试（最多 3 次）
- ✅ Mock 数据降级
- ✅ 友好的错误提示
- ⏳ 告警通知（v1.3）

---

### 3.3 安全性要求

| 安全项 | 实现方案 |
|-------|---------|
| API Key 保护 | PIN 码保护 + 数据库加密 |
| SQL 注入防护 | 参数化查询 |
| XSS 防护 | React 自动转义 + CSP |
| CSRF 防护 | SameSite Cookie |
| 数据备份 | 定期导出（v1.2） |

---

### 3.4 兼容性要求

**浏览器支持**：
- ✅ Chrome 90+
- ✅ Edge 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ 移动端浏览器（iOS Safari, Chrome Mobile）

**设备支持**：
- ✅ 桌面端（1920x1080 及以上）
- ✅ 平板（768px - 1024px）
- ✅ 手机（< 768px）

---

## 4. 技术架构

### 4.1 技术栈

**前端**：
- Next.js 16.1.6（App Router + Turbopack）
- React 19.2.3
- TypeScript 5
- Tailwind CSS 4
- shadcn/ui（UI 组件库）

**后端**：
- Next.js API Routes
- SQLite（@libsql/client）
- Node.js 内置 fetch

**AI 集成**：
- DeepSeek API（主要）
- OpenAI API（备用）
- Claude API（备用）

**部署**：
- Vercel（免费版）
- GitHub（代码托管）

---

### 4.2 数据库设计

**表结构**：

#### feed_items（信息条目表）
```sql
CREATE TABLE feed_items (
  id TEXT PRIMARY KEY,
  source TEXT NOT NULL,              -- 来源ID
  source_name TEXT NOT NULL,         -- 来源名称
  title TEXT NOT NULL,               -- 标题
  summary TEXT,                      -- 摘要
  url TEXT NOT NULL,                 -- 原文链接
  publish_time INTEGER NOT NULL,      -- 发布时间（时间戳）
  read INTEGER DEFAULT 0,            -- 是否已读
  tags TEXT,                         -- 标签（JSON数组）
  ai_summary TEXT,                   -- AI摘要
  created_at INTEGER NOT NULL        -- 创建时间
);

CREATE INDEX idx_publish_time ON feed_items(publish_time DESC);
CREATE INDEX idx_source ON feed_items(source);
CREATE INDEX idx_read ON feed_items(read);
```

#### feed_sources（信息源表）
```sql
CREATE TABLE feed_sources (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,                -- 源名称
  type TEXT NOT NULL,                -- 源类型
  icon TEXT NOT NULL,                -- 图标（emoji）
  url TEXT,                          -- 抓取URL
  enabled INTEGER DEFAULT 1,         -- 是否启用
  config TEXT,                       -- 额外配置（JSON）
  created_at INTEGER NOT NULL        -- 创建时间
);

CREATE INDEX idx_type ON feed_sources(type);
CREATE INDEX idx_enabled ON feed_sources(enabled);
```

#### daily_reports（每日报告表）
```sql
CREATE TABLE daily_reports (
  id TEXT PRIMARY KEY,
  date TEXT NOT NULL UNIQUE,         -- 日期（YYYY-MM-DD）
  summary TEXT NOT NULL,             -- 摘要
  key_points TEXT NOT NULL,          -- 关键要点（JSON数组）
  created_at INTEGER NOT NULL        -- 创建时间
);

CREATE INDEX idx_date ON daily_reports(date DESC);
```

#### settings（设置表）
```sql
CREATE TABLE settings (
  id TEXT PRIMARY KEY,
  key TEXT NOT NULL UNIQUE,          -- 设置键
  value TEXT NOT NULL                -- 设置值（JSON）
);
```

---

### 4.3 系统架构图

```
┌─────────────────────────────────────────────────────┐
│                   用户界面层                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────────────┐  │
│  │FeedCard  │  │AISummary │  │SettingsSidebar   │  │
│  └──────────┘  └──────────┘  └──────────────────┘  │
└─────────────────────────────────────────────────────┘
                       ↕ HTTP Request
┌─────────────────────────────────────────────────────┐
│                   API 路由层                        │
│  /api/feeds  /api/sources  /api/summary  /api/fetch│
└─────────────────────────────────────────────────────┘
                       ↕
┌─────────────────────────────────────────────────────┐
│                   业务逻辑层                        │
│  ┌──────────────┐  ┌──────────────┐               │
│  │FeedService   │  │SourceService │               │
│  └──────────────┘  └──────────────┘               │
│  ┌──────────────┐  ┌──────────────┐               │
│  │ReportService │  │FetchScheduler│               │
│  └──────────────┘  └──────────────┘               │
└─────────────────────────────────────────────────────┘
           ↕                    ↕
┌──────────────────┐  ┌─────────────────────┐
│   SQLite 数据库   │  │   外部数据源         │
│  feed_items      │  │  RSS/知乎/微博/小红书│
│  feed_sources    │  │                     │
│  daily_reports   │  │   AI API (DeepSeek) │
└──────────────────┘  └─────────────────────┘
```

---

## 5. 产品路线图

### 5.1 当前版本（v1.0）- 已完成 ✅

**发布日期**：2026-02-06

**核心功能**：
- ✅ 多源信息聚合（RSS、知乎）
- ✅ 统一时间线视图
- ✅ AI 智能汇总（DeepSeek）
- ✅ 信息源管理（启用/禁用/删除）
- ✅ 侧边栏设置界面
- ✅ 响应式设计
- ✅ 数据库持久化
- ✅ GitHub + Vercel 部署

---

### 5.2 v1.1 - 信息源扩展（计划 2026-03）

**目标**：支持更多信息源类型

**新功能**：
- ⏳ 添加自定义 RSS 源
- ⏳ 微博热搜抓取器
- ⏳ 小红书内容抓取
- ⏳ 历史报告查看
- ⏳ 数据导出功能（CSV/JSON）
- ⏳ 通知系统（浏览器通知）

**预期收益**：
- 信息源数量增加 3-5 倍
- 用户留存率提升 20%

---

### 5.3 v1.2 - 智能化升级（计划 2026-04）

**目标**：AI 智能推荐和个性化

**新功能**：
- ⏳ 基于阅读历史的智能推荐
- ⏳ 自定义 AI 提示词
- ⏳ 内容去重和相似度检测
- ⏳ 无限滚动加载
- ⏳ 深色模式
- ⏳ PWA 支持（离线访问）
- ⏳ 数据同步（云端数据库）

**预期收益**：
- 用户活跃度提升 30%
- 功能完成度 90%

---

### 5.4 v2.0 - 多用户与协作（计划 2026-Q3）

**目标**：从个人工具升级为协作平台

**新功能**：
- ⏳ 用户注册和登录
- ⏳ 多用户数据隔离
- ⏳ 团队协作（共享信息源）
- ⏳ 内容分享功能
- ⏳ 邮件日报推送
- ⏳ 移动端 App

**预期收益**：
- 用户数量增长 10 倍
- 商业化准备

---

### 5.5 未来愿景

**长期目标**：
- 🌟 成为个人知识管理平台
- 🌟 AI 驱动的信息过滤和推荐
- 🌟 跨平台支持（Web/Mobile/Desktop）
- 🌟 开源社区和插件生态
- 🌟 商业化模式（Premium 订阅）

---

## 6. 成功指标（KPI）

### 6.1 产品指标

| 指标 | 当前值 | v1.1 目标 | v2.0 目标 |
|-----|-------|-----------|----------|
| 日活跃用户（DAU） | 1 | 10 | 100 |
| 周活跃用户（WAU） | 1 | 20 | 500 |
| 用户留存率（7日） | - | 50% | 60% |
| 平均使用时长 | 5 分钟 | 8 分钟 | 10 分钟 |
| 信息抓取成功率 | 85% | 95% | 98% |
| AI 生成满意度 | - | 80% | 90% |

### 6.2 技术指标

| 指标 | 当前值 | 目标值 |
|-----|-------|-------|
| 首屏加载时间 | 1.8s | < 2s |
| API 响应时间 | 300ms | < 500ms |
| 系统可用性 | 95% | 99% |
| Bug 率 | 低 | < 5% |

### 6.3 业务指标

| 指标 | v1.1 | v2.0 |
|-----|------|------|
| GitHub Stars | 10 | 100 |
| 社区贡献者 | 0 | 5 |
| 付费用户 | - | 10 |
| MRR（月经常性收入） | $0 | $100 |

---

## 7. 风险与挑战

### 7.1 技术风险

| 风险 | 影响 | 概率 | 缓解措施 |
|-----|------|------|---------|
| API 推荐配额限制 | 高 | 中 | 多提供商备份 + 缓存 |
| 数据抓取被封禁 | 中 | 低 | 遵守 robots.txt + 限流 |
| Vercel 免费版限制 | 低 | 低 | 迁移到自建服务器 |
| 数据库性能瓶颈 | 中 | 低 | 索引优化 + Redis 缓存 |

### 7.2 产品风险

| 风险 | 影响 | 概率 | 缓解措施 |
|-----|------|------|---------|
| 用户获取困难 | 高 | 高 | 开源社区 + 内容营销 |
| 竞品抄袭 | 中 | 高 | 快速迭代 + 品牌建设 |
| 用户需求变化 | 中 | 中 | 用户反馈 + 灵活架构 |
| AI 生成质量不稳定 | 高 | 中 | 多模型 A/B 测试 |

### 7.3 运营风险

| 风险 | 影响 | 概率 | 缓解措施 |
|-----|------|------|---------|
| 维护成本过高 | 中 | 中 | 自动化 + 社区贡献 |
| 内容合规问题 | 高 | 低 | 内容审核机制 |
| 用户隐私泄露 | 高 | 低 | 数据加密 + 安全审计 |

---

## 8. 附录

### 8.1 术语表

| 术语 | 定义 |
|-----|------|
| RSS | Really Simple Syndication，一种内容聚合标准 |
| 热榜 | 平台的热门话题排行榜 |
| AI 汇总 | 使用人工智能生成的内容摘要 |
| 时间线 | 按时间排序的信息流 |
| 信息源 | 内容来源，如 RSS 订阅、知乎、微博等 |
| 抓取器 | 从外部数据源获取内容的程序 |
| PIN 码 | 用于保护设置的 4 位数字密码 |

### 8.2 参考资料

- [Next.js 文档](https://nextjs.org/docs)
- [React 文档](https://react.dev/)
- [Tailwind CSS 文档](https://tailwindcss.com/docs)
- [shadcn/ui 组件库](https://ui.shadcn.com/)
- [DeepSeek API 文档](https://platform.deepseek.com/docs)

### 8.3 更新日志

| 日期 | 版本 | 更新内容 |
|-----|------|---------|
| 2026-02-06 | v1.0.0 | 初始版本，核心功能完成 |
| 2026-02-05 | v0.9.0 | 侧边栏设置界面 |
| 2026-02-04 | v0.8.0 | AI 智能汇总功能 |
| 2026-02-03 | v0.5.0 | 基础信息流功能 |

---

## 9. 总结

Daylite 是一个**面向未来的个人信息聚合平台**，通过 AI 技术解决信息过载问题。当前版本（v1.0）已经实现了核心的信息聚合和 AI 汇总功能，为后续迭代奠定了坚实基础。

**核心优势**：
- 🚀 技术栈现代（Next.js 16 + React 19）
- 🎨 设计简洁优雅（shadcn/ui）
- 🤖 AI 原生集成
- 📱 完美响应式
- 🔒 隐私安全优先

**下一步重点**：
1. 扩展信息源类型（v1.1）
2. 提升智能推荐能力（v1.2）
3. 建立用户社区（v2.0）

---

**文档维护**：本文档将随产品迭代持续更新。

**联系方式**：
- GitHub: https://github.com/dyzzz123/Daylite
- Vercel: https://daylite-psi.vercel.app/
